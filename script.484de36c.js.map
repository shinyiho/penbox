{"version":3,"sources":["../src/FileSaver.js","vector.js","script.js"],"names":["sub","a","b","x","y","add","magnitude","Math","sqrt","pow","normalize","mag","scale","s","distance","aX","aY","bX","bY","random","n","pointsAlongLine","startx","starty","endx","endy","spacing","dist","points","start","end","d","relative","point","push","length","canvas","document","getElementById","width","window","innerWidth","height","innerHeight","mousedown","lastx","lasty","ctx","getContext","fillStyle","fillRect","addEventListener","toBlob","blob","undoStack","redoStack","pushImageData","getImageData","size","randomP","e","preventDefault","pop","putImageData","targetImageData","penbox","ink1","ink2","ink3","ink4","ink5","ink6","penchosen","forEach","p","beginPath","stroke","i","strokeStyle","arc","PI","moveTo","fill","querySelectorAll","pen","console","log","target","getAttribute","clientX","clientY","touches","touch","Array","from"],"mappings":"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","file":"script.484de36c.js","sourceRoot":"../src","sourcesContent":["/*\n* FileSaver.js\n* A saveAs() FileSaver implementation.\n*\n* By Eli Grey, http://eligrey.com\n*\n* License : https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md (MIT)\n* source  : http://purl.eligrey.com/github/FileSaver.js\n*/\n\n// The one and only way of getting global scope in all environments\n// https://stackoverflow.com/q/3277182/1008999\nvar _global = typeof window === 'object' && window.window === window\n  ? window : typeof self === 'object' && self.self === self\n  ? self : typeof global === 'object' && global.global === global\n  ? global\n  : this\n\nfunction bom (blob, opts) {\n  if (typeof opts === 'undefined') opts = { autoBom: false }\n  else if (typeof opts !== 'object') {\n    console.warn('Deprecated: Expected third argument to be a object')\n    opts = { autoBom: !opts }\n  }\n\n  // prepend BOM for UTF-8 XML and text/* types (including HTML)\n  // note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n  if (opts.autoBom && /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n    return new Blob([String.fromCharCode(0xFEFF), blob], { type: blob.type })\n  }\n  return blob\n}\n\nfunction download (url, name, opts) {\n  var xhr = new XMLHttpRequest()\n  xhr.open('GET', url)\n  xhr.responseType = 'blob'\n  xhr.onload = function () {\n    saveAs(xhr.response, name, opts)\n  }\n  xhr.onerror = function () {\n    console.error('could not download file')\n  }\n  xhr.send()\n}\n\nfunction corsEnabled (url) {\n  var xhr = new XMLHttpRequest()\n  // use sync to avoid popup blocker\n  xhr.open('HEAD', url, false)\n  try {\n    xhr.send()\n  } catch (e) {}\n  return xhr.status >= 200 && xhr.status <= 299\n}\n\n// `a.click()` doesn't work for all browsers (#465)\nfunction click (node) {\n  try {\n    node.dispatchEvent(new MouseEvent('click'))\n  } catch (e) {\n    var evt = document.createEvent('MouseEvents')\n    evt.initMouseEvent('click', true, true, window, 0, 0, 0, 80,\n                          20, false, false, false, false, 0, null)\n    node.dispatchEvent(evt)\n  }\n}\n\n// Detect WebView inside a native macOS app by ruling out all browsers\n// We just need to check for 'Safari' because all other browsers (besides Firefox) include that too\n// https://www.whatismybrowser.com/guides/the-latest-user-agent/macos\nvar isMacOSWebView = _global.navigator && /Macintosh/.test(navigator.userAgent) && /AppleWebKit/.test(navigator.userAgent) && !/Safari/.test(navigator.userAgent)\n\nvar saveAs = _global.saveAs || (\n  // probably in some web worker\n  (typeof window !== 'object' || window !== _global)\n    ? function saveAs () { /* noop */ }\n\n  // Use download attribute first if possible (#193 Lumia mobile) unless this is a macOS WebView\n  : ('download' in HTMLAnchorElement.prototype && !isMacOSWebView)\n  ? function saveAs (blob, name, opts) {\n    var URL = _global.URL || _global.webkitURL\n    var a = document.createElement('a')\n    name = name || blob.name || 'download'\n\n    a.download = name\n    a.rel = 'noopener' // tabnabbing\n\n    // TODO: detect chrome extensions & packaged apps\n    // a.target = '_blank'\n\n    if (typeof blob === 'string') {\n      // Support regular links\n      a.href = blob\n      if (a.origin !== location.origin) {\n        corsEnabled(a.href)\n          ? download(blob, name, opts)\n          : click(a, a.target = '_blank')\n      } else {\n        click(a)\n      }\n    } else {\n      // Support blobs\n      a.href = URL.createObjectURL(blob)\n      setTimeout(function () { URL.revokeObjectURL(a.href) }, 4E4) // 40s\n      setTimeout(function () { click(a) }, 0)\n    }\n  }\n\n  // Use msSaveOrOpenBlob as a second approach\n  : 'msSaveOrOpenBlob' in navigator\n  ? function saveAs (blob, name, opts) {\n    name = name || blob.name || 'download'\n\n    if (typeof blob === 'string') {\n      if (corsEnabled(blob)) {\n        download(blob, name, opts)\n      } else {\n        var a = document.createElement('a')\n        a.href = blob\n        a.target = '_blank'\n        setTimeout(function () { click(a) })\n      }\n    } else {\n      navigator.msSaveOrOpenBlob(bom(blob, opts), name)\n    }\n  }\n\n  // Fallback to using FileReader and a popup\n  : function saveAs (blob, name, opts, popup) {\n    // Open a popup immediately do go around popup blocker\n    // Mostly only available on user interaction and the fileReader is async so...\n    popup = popup || open('', '_blank')\n    if (popup) {\n      popup.document.title =\n      popup.document.body.innerText = 'downloading...'\n    }\n\n    if (typeof blob === 'string') return download(blob, name, opts)\n\n    var force = blob.type === 'application/octet-stream'\n    var isSafari = /constructor/i.test(_global.HTMLElement) || _global.safari\n    var isChromeIOS = /CriOS\\/[\\d]+/.test(navigator.userAgent)\n\n    if ((isChromeIOS || (force && isSafari) || isMacOSWebView) && typeof FileReader !== 'undefined') {\n      // Safari doesn't allow downloading of blob URLs\n      var reader = new FileReader()\n      reader.onloadend = function () {\n        var url = reader.result\n        url = isChromeIOS ? url : url.replace(/^data:[^;]*;/, 'data:attachment/file;')\n        if (popup) popup.location.href = url\n        else location = url\n        popup = null // reverse-tabnabbing #460\n      }\n      reader.readAsDataURL(blob)\n    } else {\n      var URL = _global.URL || _global.webkitURL\n      var url = URL.createObjectURL(blob)\n      if (popup) popup.location = url\n      else location.href = url\n      popup = null // reverse-tabnabbing #460\n      setTimeout(function () { URL.revokeObjectURL(url) }, 4E4) // 40s\n    }\n  }\n)\n\n_global.saveAs = saveAs.saveAs = saveAs\n\nif (typeof module !== 'undefined') {\n  module.exports = saveAs;\n}\n","function sub(a, b) {\n  return { x: b.x - a.x, y: b.y - a.y };\n}\nfunction add(a, b) {\n  return { x: b.x + a.x, y: b.y + a.y };\n}\nfunction magnitude(a) {\n  return Math.sqrt(Math.pow(a.x, 2) + Math.pow(a.y, 2));\n}\nfunction normalize(a) {\n  let mag = magnitude(a);\n  return { x: a.x / mag, y: a.y / mag };\n}\nfunction scale(a, s) {\n  return { x: a.x * s, y: a.y * s };\n}\nfunction distance(aX, aY, bX, bY) {\n  return Math.sqrt(Math.pow(aX - bX, 2) + Math.pow(aY - bY, 2));\n}\nfunction random(n) {\n  return (Math.random() - 0.5) * n;\n}\n\nfunction pointsAlongLine(startx, starty, endx, endy, spacing) {\n  let dist = distance(startx, starty, endx, endy);\n  let points = [];\n\n  let start = { x: startx, y: starty };\n  let end = { x: endx, y: endy };\n  for (var d = 0; d <= dist + 1; d += spacing) {\n    let relative = sub(end, start);\n    let delta = scale(normalize(relative), -d);\n    let point = add(start, delta);\n    points.push(point);\n    if (points.length >= 10000) break;\n  }\n  return points;\n}\nexport { pointsAlongLine };\n","import { saveAs } from \"file-saver\";\nimport { pointsAlongLine } from \"./vector.js\";\nconst canvas = document.getElementById(\"canvas\");\ncanvas.width = window.innerWidth;\ncanvas.height = window.innerHeight;\nconst ctx = canvas.getContext(\"2d\");\n\n// ctx.lineJoin = \"round\";\n// ctx.lineCap = \"round\";\n// ctx.lineWidth = 2;\n\n//fill canvas background color\nctx.fillStyle = \"#fffcf5\";\nctx.fillRect(0, 0, canvas.width, canvas.height); //fill canvas background color\n\n// //draw a line\n// ctx.moveTo(0, 0);\n// ctx.lineTo(100, 100);\n// ctx.stroke();\n\n// // draw a circle\n// ctx.beginPath();\n// ctx.arc(195, 250, 40, 0, 2 * Math.PI);\n// ctx.stroke();\n\n// //draw a rec\n// ctx.fillStyle = \"coral\";\n// ctx.fillRect(230, 210, 150, 80);\n\n//save Img\ndocument.getElementById(\"download\").addEventListener(\"click\", () => {\n  canvas.toBlob(function (blob) {\n    saveAs(blob, \"myIMage.png\");\n  });\n});\n\n// clear\ndocument.getElementById(\"clear\").addEventListener(\"click\", () => {\n  ctx.fillStyle = \"#fffcf5\";\n  ctx.fillRect(0, 0, canvas.width, canvas.height); //fill canvas background color\n});\nlet mousedown;\nlet x;\nlet y;\nlet lastx;\nlet lasty;\n\n//undoredo\nlet undoStack = [];\nlet redoStack = [];\npushImageData();\n//undo\nfunction pushImageData() {\n  undoStack.push(ctx.getImageData(0, 0, canvas.width, canvas.height));\n  redoStack = [];\n}\ndocument.getElementById(\"undo\").addEventListener(\"click\", (e) => {\n  e.preventDefault();\n  if (undoStack.length > 1) {\n    redoStack.push(undoStack.pop());\n\n    ctx.putImageData(undoStack[undoStack.length - 1], 0, 0);\n  }\n});\n\n//redo\ndocument.getElementById(\"redo\").addEventListener(\"click\", (e) => {\n  e.preventDefault();\n  if (redoStack.length) {\n    let targetImageData = redoStack.pop();\n    ctx.putImageData(targetImageData, 0, 0);\n    undoStack.push(targetImageData);\n  }\n});\n\n//randomnumber\nfunction random(size) {\n  return (Math.random() - 0.5) * size;\n}\nfunction randomP(size) {\n  return Math.random() * size;\n}\n//draw with different open\nconst penbox = [ink1, ink2, ink3, ink4, ink5, ink6];\nlet penchosen = penbox[0];\ndocument.querySelectorAll(\".pens\").forEach((pen) => {\n  pen.addEventListener(\"click\", (e) => {\n    e.preventDefault();\n    console.log(penbox[e.target.getAttribute(\"no\")]);\n    penchosen = penbox[e.target.getAttribute(\"no\")];\n  });\n});\nfunction ink1(x, y) {\n  let interpolatedPoints = pointsAlongLine(x, y, lastx, lasty, 12);\n  interpolatedPoints.forEach((p) => {\n    ctx.fillStyle = `rgba( 0, 0,0,0.3)`;\n    ctx.beginPath();\n    ctx.fillRect(p.x, p.y - 4, 1, 48);\n    ctx.fillRect(p.x - 6, p.y + 2, 28, 3);\n    ctx.stroke();\n  });\n}\nfunction ink2(x, y) {\n  let interpolatedPoints = pointsAlongLine(x, y, lastx, lasty, 6);\n  interpolatedPoints.forEach((p) => {\n    for (let i = 0; i < 30; i++) {\n      ctx.fillStyle = `rgba( ${randomP(255)}, 0,${randomP(255)},0.5)`;\n      ctx.strokeStyle = `rgba( ${randomP(255)}, 0,${randomP(255)},0.5)`;\n      ctx.beginPath();\n      ctx.arc(p.x + random(10), p.y + random(10), randomP(0.2), 0, 2 * Math.PI);\n      ctx.stroke();\n    }\n  });\n}\nfunction ink3(x, y) {\n  ctx.fillStyle = `rgba( ${randomP(255)}, 0,${randomP(255)},0.5)`;\n  ctx.strokeStyle = `rgba( ${randomP(255)}, 0,${randomP(255)},0.2)`;\n  ctx.moveTo(x, y);\n  ctx.fillRect(x, y, randomP(10), randomP(80));\n}\nfunction ink4(x, y) {\n  let interpolatedPoints = pointsAlongLine(x, y, lastx, lasty, 6);\n  interpolatedPoints.forEach((p) => {\n    for (let i = 0; i < 2; i++) {\n      ctx.fillStyle = `rgba( ${randomP(255)}, 0,${randomP(255)},0.5)`;\n      ctx.beginPath();\n      ctx.arc(p.x, p.y, 3, 0, 2 * Math.PI);\n      ctx.fill();\n      ctx.beginPath();\n      ctx.fillRect(p.x + random(30), p.y + random(30), 10, 10);\n      ctx.stroke();\n    }\n  });\n}\nfunction ink5(x, y) {\n  let interpolatedPoints = pointsAlongLine(x, y, lastx, lasty, 2);\n  interpolatedPoints.forEach((p) => {\n    ctx.strokeStyle = `rgba( ${randomP(255)}, 0,${randomP(255)},0.3)`;\n    ctx.beginPath();\n    ctx.arc(p.x, p.y, 4, Math.PI * randomP(1), Math.PI * randomP(1));\n    ctx.stroke();\n  });\n}\nfunction ink6(x, y) {\n  let interpolatedPoints = pointsAlongLine(x, y, lastx, lasty, 2);\n  interpolatedPoints.forEach((p) => {\n    ctx.strokeStyle = `rgba( 0, 0,0,0.3)`;\n    ctx.beginPath();\n    ctx.arc(p.x, p.y, 200, Math.PI * randomP(1), Math.PI * randomP(1));\n    ctx.stroke();\n  });\n}\n\n//drawEvent\ncanvas.addEventListener(\"mousedown\", (e) => {\n  mousedown = true;\n});\ncanvas.addEventListener(\"mousemove\", (e) => {\n  if (mousedown == true) {\n    penchosen(e.clientX, e.clientY);\n  }\n  lastx = e.clientX;\n  lasty = e.clientY;\n});\ncanvas.addEventListener(\"mouseup\", () => {\n  mousedown = false;\n  pushImageData();\n});\ncanvas.addEventListener(\"mouseout\", () => {\n  mousedown = false;\n});\n\n//touchEvent\ncanvas.addEventListener(\"touchstart\", (e) => {\n  let touches = Array.from(e.touches);\n  let touch = touches[0];\n  lastx = touch.clientX;\n  lasty = touch.clientY;\n  penchosen(touch.clientX, touch.clientY);\n});\ncanvas.addEventListener(\"touchmove\", (e) => {\n  e.preventDefault();\n  let touches = Array.from(e.touches);\n  let touch = touches[0];\n  penchosen(touch.clientX, touch.clientY);\n  lastx = touch.clientX;\n  lasty = touch.clientY;\n});\ncanvas.addEventListener(\"touchend\", () => {\n  pushImageData();\n  //  lastx = touch.clientX;\n  // lasty = touch.clientY;\n});\n"]}